Ö
†C:\Users\jonatan.amado_pragma\Documents\Repositorios\AppPlazoleta\MensajeriaService\MensajeriaService\Controllers\MessageController.cs
	namespace 	
MensajeriaService
 
. 
WebApi "
." #
Controllers# .
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
$str		 
)		 
]		 
public

 

class

 
MessageController

 "
:

" #
ControllerBase

# 1
{ 
private 
readonly 
IMessageService (
_messageService) 8
;8 9
public 
MessageController  
(  !
IMessageService! 0
messageService1 ?
)? @
{ 	
_messageService 
= 
messageService ,
;, -
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
SendSMS) 0
(0 1
[1 2
FromBody2 :
]: ;
MessageModel< H
messageI P
)P Q
{ 	
MessageData 
data 
= 
new "
MessageData# .
{ 
Phone 
= 
message 
.  
Phone  %
,% &
Message 
= 
message !
.! "
Message" )
} 
; 
var 
success 
= 
await 
_messageService  /
./ 0
SendSMS0 7
(7 8
data8 <
)< =
;= >
if 
( 
success 
) 
{ 
return 
Ok 
( 
$str 4
)4 5
;5 6
}   
else!! 
{"" 
return## 

BadRequest## !
(##! "
$str##" :
)##: ;
;##; <
}$$ 
}%% 	
['' 	
HttpPost''	 
('' 
$str'' 
)'' 
]'' 
public(( 
async(( 
Task(( 
<(( 
IActionResult(( '
>((' (
SendWhatsapp(() 5
(((5 6
[((6 7
FromBody((7 ?
]((? @
MessageModel((A M
message((N U
)((U V
{)) 	
MessageData** 
data** 
=** 
new** "
MessageData**# .
{++ 
Phone,, 
=,, 
message,, 
.,,  
Phone,,  %
,,,% &
Message-- 
=-- 
message-- !
.--! "
Message--" )
}.. 
;.. 
var00 
success00 
=00 
await00 
_messageService00  /
.00/ 0
SendWhatsapp000 <
(00< =
data00= A
)00A B
;00B C
if22 
(22 
success22 
)22 
{33 
return44 
Ok44 
(44 
$str44 D
)44D E
;44E F
}55 
else66 
{77 
return88 

BadRequest88 !
(88! "
$str88" >
)88> ?
;88? @
}99 
}:: 	
};; 
}<< 
|C:\Users\jonatan.amado_pragma\Documents\Repositorios\AppPlazoleta\MensajeriaService\MensajeriaService\Models\MessageModel.cs
	namespace 	
MensajeriaService
 
. 
WebApi "
." #
Models# )
{ 
public 

class 
MessageModel 
{ 
[ 	
Required	 
] 
public 
string 
Phone 
{ 
get !
;! "
set# &
;& '
}( )
[		 	
Required			 
]		 
public

 
string

 
Message

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
} 
} Ñ
pC:\Users\jonatan.amado_pragma\Documents\Repositorios\AppPlazoleta\MensajeriaService\MensajeriaService\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder

 
.

 
Services

 
.

 
AddControllers

 
(

  
)

  !
;

! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Host 
. %
UseServiceProviderFactory &
(& '
new' *)
AutofacServiceProviderFactory+ H
(H I
)I J
)J K
. 
ConfigureContainer 
< 
ContainerBuilder (
>( )
() *
builder* 1
=>2 4
{ 
builder 
. 
RegisterModule 
( 
new "
DomainModule# /
(/ 0
)0 1
)1 2
;2 3
builder 
. 
RegisterModule 
( 
new " 
InfrastructureModule# 7
(7 8
)8 9
)9 :
;: ;
} 
) 
; 
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app!! 
.!! 
UseHttpsRedirection!! 
(!! 
)!! 
;!! 
app## 
.## 
UseAuthorization## 
(## 
)## 
;## 
app%% 
.%% 
MapControllers%% 
(%% 
)%% 
;%% 
app'' 
.'' 
Run'' 
('' 
)'' 	
;''	 
